(function(){var Form,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Form=function(_super){function Form($form,logicJumpsController,scoreCalculator,priceCalculator,submitButton,observer,templates,settings,currencyFormatter,numberFormatter,controlsFactory,submissionRepository){var numAnswers,self,stripeService;this.$form=$form,this.logicJumpsController=logicJumpsController,this.scoreCalculator=scoreCalculator,this.priceCalculator=priceCalculator,this.submitButton=submitButton,this.observer=observer,this.templates=templates,this.currencyFormatter=currencyFormatter,this.numberFormatter=numberFormatter,this.controlsFactory=controlsFactory,this.submissionRepository=submissionRepository,self=this,this.$document=$(document),this.$body=$("body"),this.settings=$.extend({},defaults,settings),this.header=new App["default"].Header({model:new App.HeaderModel}),this.subheader=new App["default"].SubHeader({model:new App.HeaderModel}),this.$footer=this.$form.find("#unfixed-footer"),this.$upButton=$(".nav-buttons").find(".up").children(".button"),this.$downButton=$(".nav-buttons").find(".down").children(".button"),this.scrollPoints=new App.Service.ScrollPoints,stripeService=App.Utils.StripeServiceFactory.getStripeService(this.settings.stripePublishableKey),this.footer=new App.Footer(this.$footer,stripeService,this.scoreCalculator,this.priceCalculator,this.numberFormatter,this.submitButton,this.submissionRepository,{useKeyboard:!0,blurHeight:58,onSuccess:function(){return self.close()}}),this.$ul=this.$form.children(".questions"),this.$quickys=this.$ul.children("li"),this.numQuestions=this.$quickys.length,numAnswers=this.$ul.children("li:not(.statement,.group)").length,0===numAnswers&&this.$body.removeClass("percent proportion"),this.$body.hasClass("proportion")&&!_.isEmpty(jumps)&&this.$body.removeClass("proportion").addClass("percent"),this.apiProgress=this.$body.hasClass("proportion")?this.$body.find("#progress").progressBar(numAnswers,{mode:0,text:App.Texts["progress-proportion"]}).data("progress"):this.$body.hasClass("percent")?this.$body.find("#progress").progressBar(numAnswers,{mode:1,text:App.Texts["progress-percent"]}).data("progress"):this.$body.find("#progress").progressBar(numAnswers,{mode:1,text:App.Texts["progress-percent"],hidden:!0}).data("progress"),this.scroll=new App.Scroll(this.$ul,{footer:"field"!==Globals.parent?this.footer:void 0,onFocus:function($quicky){var control;return control=$quicky.data("control"),self.preloadNextVisibleImages(control),self.scroll.isAtFooter()?(self.$downButton.enable(!1),self.$upButton.enable(!0)):(self.$downButton.enable(!0),self.$upButton.enable(!self.scroll.isAtFirst()),control.bindEvents(),self.Error.check(control.$elem),control.open(),null!=control.connect&&(control.connect.$elem.addClass("focus"),control.connect.bindEvents(),control.connect.open(),control.connect.attachment?control.connect.attachment.load():"list-image"===control.connect.type&&control.connect.load()),self.footer.hide(),self.$ul.css({top:0}),control.attachment?control.attachment.load():"list-image"===control.type?control.load():void 0)},onBlur:function($quicky){var control;return control=$quicky.data("control"),null!=control.connect&&(control.connect.$elem.removeClass("focus"),control.connect.unbindEvents(),control.connect.setValue(),control.connect.attachment?control.connect.attachment.pause():"list-image"===control.connect.type&&control.connect.pause()),control.unbindEvents(),self.confirmButton.hide(),control.attachment?control.attachment.pause():"list-image"===control.type?control.pause():void 0}}),this.Error=new App.Error(this.footer,{onFinish:function(){return self.scroll.refresh()}}),this.confirmButton=new App.Confirm(this.scroll),window.useKeyboardEvents=!0,window.form={error:{show:function(elem,str){return self.Error.show(elem,str)},hide:function(elem,str){return self.Error.hide(elem,str)}},autoNext:function(delay){return null==delay&&(delay=!0),self.next(delay,!1)},next:function(delay){return null==delay&&(delay=!1),self.next(delay)},scrollTo:function(index){return self.scroll.scrollTo(index)},updatePositions:function(){return self.scroll.refresh()},center:function(h){return self.scroll.scrollToPos(window.pageYOffset+h)},checkConfirm:self.confirmButton.check},this.controls=this.controlsFactory.build(this.$quickys,this.confirmButton,this.scroll,this.templates,this.footer),this.footer.setControls(this.controls),this.logicJumpsController.setControls(this.controls),this.scoreCalculator.connect(this.controls),this.priceCalculator.connect(this.controls),this.extend(),Form.__super__.constructor.call(this)}var defaults,preventNavEvents,resizeDocument,resizeFooter,resizeFromDocumentSize;return __extends(Form,_super),defaults={onClose:function(){}},preventNavEvents=!1,resizeFooter=function(){return this.footer.resize(this.windowHeight)},resizeDocument=function(){var $wrapper,attachmentContainerWidth,control,_i,_j,_k,_l,_len,_len1,_len2,_len3,_ref,_ref1,_ref2,_ref3;for(attachmentContainerWidth=null,this.$body.addClass("resize-precalculate"),_ref=this.controls,_i=0,_len=_ref.length;_len>_i;_i++)control=_ref[_i],$wrapper=control.$elem.children(".wrapper"),$wrapper.height(""),control.attachment&&control.attachment.precalculate(),control.resize();for(this.$body.removeClass("resize-precalculate"),_ref1=this.controls,_j=0,_len1=_ref1.length;_len1>_j;_j++)control=_ref1[_j],control.attachment&&(null==attachmentContainerWidth&&(attachmentContainerWidth=control.attachment.$attachment.parent().width()),control.attachment.resize(this.windowHeight,attachmentContainerWidth)),null!=control.applyResize&&control.applyResize();for(_ref2=this.controls,_k=0,_len2=_ref2.length;_len2>_k;_k++)control=_ref2[_k],null!=control.sortKeyboardNavigation&&control.sortKeyboardNavigation(),"field"!==Globals.parent&&(control.$wrapper=control.$elem.children(".wrapper"),control.wrapperHeight=control.$wrapper.height());if("field"!==Globals.parent)for(_ref3=this.controls,_l=0,_len3=_ref3.length;_len3>_l;_l++)control=_ref3[_l],control.$wrapper.height(control.wrapperHeight);return this.$ul.css({marginTop:this.windowHeight/2,marginBottom:this.windowHeight/2+this.footer.getScrollableLength()})},resizeFromDocumentSize=function(){var current,_ref;return this.header.hide(),this.subheader.hide(),this.$body.addClass("resizing-scroll"),this.scroll.refresh(!1),this.setScrollPoints(),this.$body.removeClass("resizing-scroll"),current=this.scroll.getCurrent(),current>0&&this.scroll.scrollTo(current,!1,!1),null!=(null!=(_ref=this.controls[current])?_ref.parent:void 0)&&this.header.show(),resizeFooter.call(this)},Form.prototype.show=function(){},Form.prototype.hide=function(){return this.$form.hide()},Form.prototype.afterHideLoader=function(){return this.$form.prepend(this.subheader.render(),this.header.render())},Form.prototype.open=function(startQuestion,animate){var self;return null==startQuestion&&(startQuestion=0),null==animate&&(animate=!0),self=this,this.$form.fadeIn(Globals.pageTransitionDelay),self.scroll.start(animate),"field"!==Globals.parent&&this.scroll.bindEvents(),this.bindEvents()},Form.prototype.close=function(){var self;return self=this,this.$form.fadeOut(Globals.pageTransitionDelay,function(){return self.settings.onClose()}),this.unbindEvents()},Form.prototype.refresh=function(){this.scroll.refresh(!0),resizeFooter.call(this),this.setScrollPoints()},Form.prototype.resize=function(windowHeight){this.windowHeight=windowHeight,resizeDocument.call(this),resizeFromDocumentSize.call(this)},Form.prototype.bindEvents=function(){return $(document).on("keydown.form",this,function(e){var currentControl,displayedControls,key,self;if(self=e.data,key=document.all?e.keyCode:e.which,self.scroll.isAtFooter()||(currentControl=self.scroll.getCurrentControl()),displayedControls=_.filter(self.controls,function(control){return control.isActive&&control.isVisible}),"keydown"===e.type)if(App.Keyboard.isEnter(key)&&!self.preventNavEvents){if(currentControl&&currentControl.checkEnter()&&(e.preventDefault(),!self.scroll.isAtFooter()))return form.next("fast")}else if(App.Keyboard.isSpace(key)){if(!$(e.target).is(":input"))return e.preventDefault()}else if((App.Keyboard.isTab(key)&&e.shiftKey||App.Keyboard.isPageUp(key))&&!this.preventNavEvents){if(e.preventDefault(),!self.scroll.isAtFirst())return self.scroll.scrollToPrev(!1)}else if((App.Keyboard.isTab(key)&&!e.shiftKey||App.Keyboard.isPageDown(key))&&!this.preventNavEvents){if(e.preventDefault(),!self.scroll.isAtFooter())return self.scroll.scrollToNext(!1)}else{if(App.Keyboard.isArrowDown(key)){if(!self.scroll.isAtFooter()&&(currentControl.advanceArrow(App.Keyboard.DOWN)||e.shiftKey)){self.scroll.scrollToNext(!1);try{displayedControls[self.scroll.getCurrent()+1].preSelectFirst()}catch(_error){}}return!1}if(App.Keyboard.isArrowUp(key))return(self.scroll.isAtFooter()||currentControl.advanceArrow(App.Keyboard.UP)||e.shiftKey)&&(self.scroll.isAtFirst()||(self.scroll.scrollToPrev(!1),displayedControls[self.scroll.getCurrent()-1].preSelectLast())),!1;if(App.Keyboard.isArrowRight(key)){if(!self.scroll.isAtFooter()&&(currentControl.advanceArrow(App.Keyboard.RIGHT)||e.shiftKey)){self.scroll.scrollToNext(!1);try{displayedControls[self.scroll.getCurrent()+1].preSelectFirst()}catch(_error){}}return!1}if(App.Keyboard.isArrowLeft(key))return(self.scroll.isAtFooter()||currentControl.advanceArrow(App.Keyboard.LEFT)||e.shiftKey)&&(self.scroll.isAtFirst()||(self.scroll.scrollToPrev(!1),displayedControls[self.scroll.getCurrent()-1].preSelectLast())),!1}}),$(document).on("mouseenter.form mouseleave.form",".container",this,function(e){return"mouseenter"===e.type?($(".pre-selected").removeClass("pre-selected"),$(this).addClass("pre-selected")):$(this).removeClass("pre-selected")}),$(".nav-buttons").on("mouseup.form",".nav.enabled",this,function(e){var self;return self=e.data,$(this).parent(".down").length?self.scroll.scrollToNext(!1):self.scroll.scrollToPrev(!1)})},Form.prototype.unbindEvents=function(){$(document).off(".form"),this.scroll.unbindEvents(),this.footer.unbindEvents()},Form.prototype.updateHeaderModel=function(header,control){var attachment,splitQuestion;attachment=null!=control.attachment.$attachment?control.attachment:!1,splitQuestion=control.question.getText().split("<br>"),splitQuestion.length>1&&(splitQuestion[0]+="..."),header.model.set({question:splitQuestion[0],item:control.$elem.find(".item").html(),type:"group"===control.type?"group":"default",attachment:attachment,description:control.description.getText(),showStripeBanner:control.isPaymentField&&control.isPaymentField()})},Form.prototype.calculatePoints=function(control){var bottomOffset,bottomPoint,childrenHeight,childs,fieldHeight,topOffset,topPoint,windowHeight;return windowHeight=$(window).height(),fieldHeight=control.$elem.outerHeight(),"group"===control.type?(childs=control.getActiveAndVisibleSubquestions(),childrenHeight=_.reduce(childs,function(memo,child){return memo+child.$elem.outerHeight(!0)},0),null!=control.connect?childs.length>0?topPoint=childs[0].position.next:(topOffset=20,topPoint=control.position.item-fieldHeight/2+windowHeight/2+topOffset):topPoint=control.position.next,bottomOffset=100,bottomPoint=control.position.item+fieldHeight+childrenHeight-bottomOffset):(null!=control.parent?(topOffset=-117,bottomOffset=80):(topOffset=20,bottomOffset=30),topPoint=control.position.item-fieldHeight/2+windowHeight/2+topOffset,bottomPoint=control.position.item+fieldHeight/2-bottomOffset),{topPoint:topPoint,bottomPoint:bottomPoint}},Form.prototype.setScrollPoints=function(){var _this=this;this.scrollPoints.reset(),_.each(this.controls,function(control){var bottomPoint,delayCallbackId,headerToUse,timeToAct,topPoint,_ref;return control.isActive&&control.isVisible?(headerToUse=null!=control.parent?_this.subheader:_this.header,null!=control.parent&&control.parent.connect===control?!1:(_ref=_this.calculatePoints(control),topPoint=_ref.topPoint,bottomPoint=_ref.bottomPoint,topPoint>bottomPoint?void 0:(timeToAct=150,delayCallbackId=null,_this.scrollPoints.add({y:topPoint,callback:function(direction){clearTimeout(delayCallbackId),delayCallbackId=_.delay(function(direction){if("down"===direction){if(_this.updateHeaderModel(headerToUse,control),headerToUse.show(),"group"===control.type)return control.$elem.addClass("fadeout"),_this.header.$el.trigger("thumbnail-show")}else if(headerToUse.hide(),"group"===control.type)return control.$elem.removeClass("fadeout")},timeToAct,direction)}}),_this.scrollPoints.add({y:bottomPoint,callback:function(direction){return clearTimeout(delayCallbackId),delayCallbackId=_.delay(function(direction){if("down"===direction){if(headerToUse===_this.header&&headerToUse.$el.trigger("thumbnail-hide"),headerToUse.hide(),"group"===control.type)return control.$elem.removeClass("fadeout")}else if(_this.updateHeaderModel(headerToUse,control),headerToUse.show(),"group"===control.type)return control.$elem.addClass("fadeout")},timeToAct,direction)}})))):!1})},Form.prototype.extend=function(){var self;return self=this,$(window).scrollTop(0),this.$body.on("mouseup mousedown mouseleave",".focus .button,#fixed-footer .button,#unfixed-footer .button,.screen .button,.footer-confirm .button",function(e){return"mousedown"===e.type?$(this).addClass("active"):$(this).removeClass("active")}),App.KeyboardTooltips(),$("#private").each(function(){var $quickyPreview;return $quickyPreview=$(this),$quickyPreview.addClass(self===top?"top":"embed"),$quickyPreview.on("click","img",function(){return $(this).parent().fadeOut(),self.$body.removeClass("private")})})},Form}(App.Logic),namespace("App",function(exports){return exports.Form=Form})}).call(this),function(){var Scroll;Scroll=function(){function Scroll($element,settings){this.settings=$.extend({},defaults,settings),this.footer=settings.footer||!1,this.$element=$element,this.$items=$element.children(".active"),this.numQuestions=this.$items.length,this.current=-1,this.positions=[],this.$items.filter(":lt(3)").addClass("visible")}var defaults,getCurrent,_scroll;return defaults={scrollSpeed:225,animateEase:"easeOutCubic",delayAutoScroll:700,delayAutoScrollFast:100,onFocus:function(){},onBlur:function(){},onReachPrev:function(){},onReachNext:function(){},onScrollStart:function(){},onScrollStop:function(){}},Scroll.prototype.getScrollSpeed=function(){return this.settings.scrollSpeed},Scroll.prototype.refresh=function(hasDomChanges){var offsetFooter,pos,self,windowHeight;return null==hasDomChanges&&(hasDomChanges=!1),self=this,hasDomChanges&&(this.$items=this.$element.children(".active"),this.numQuestions=this.$items.length),pos=0,offsetFooter=0,this.footer&&(offsetFooter=this.footer.get("blurHeight")/2),windowHeight=$(window).height(),this.$items.each(function(index,item){var connected_height,control,itemHeight,position,positionTop,scrollPointA,scrollPointItem;return control=$(item).data("control"),positionTop=pos,itemHeight=$(item).outerHeight(),pos+=itemHeight,connected_height="group"===control.type&&null!=control.connect?itemHeight+control.connect.$elem.outerHeight():itemHeight,scrollPointItem=positionTop+itemHeight/2+offsetFooter,scrollPointA=null!=control.parent?Math.min(positionTop+connected_height/2+offsetFooter,positionTop+(windowHeight+offsetFooter)/2-typeform.Form.header.getProperty("heights","group")-40):Math.min(positionTop+connected_height/2+offsetFooter,positionTop+(windowHeight+offsetFooter)/2),position={prev:positionTop+offsetFooter,item:scrollPointItem,next:positionTop+itemHeight+offsetFooter,a:scrollPointA},control&&(control.position=position),self.positions[index]=position}),this.footer?self.positions[this.numQuestions]={prev:self.positions[this.numQuestions-1].next,item:self.positions[this.numQuestions-1].next+120,next:$(document).height()}:void 0},Scroll.prototype.start=function(animate){return this.focus(0),animate?this.scrollTo(0):$(window).scrollTop(this.positions[0].a)},Scroll.prototype.getCurrent=function(){return this.current},Scroll.prototype.getCurrentControl=function(){var currentControl;return currentControl=this.$items.eq(this.current).data("control"),currentControl&&"group"===currentControl.type&&null!=currentControl.connect&&(currentControl=currentControl.connect),currentControl},Scroll.prototype.isAtFirst=function(){return 0===this.current},Scroll.prototype.isAtLastField=function(){return this.current===this.numQuestions-1},Scroll.prototype.isAtFooter=function(){return this.current===this.numQuestions},Scroll.prototype.scrollToPos=function(top,callback,animate){return null==animate&&(animate=!0),animate?$("html,body").stop(!0,!0).animate({scrollTop:top},this.settings.scrollSpeed,this.settings.animateEase,function(){return callback?callback():void 0}):$("html,body").scrollTop(top)},Scroll.prototype.scrollTo=function(index,delay,animate){var control,self,time;return null==delay&&(delay=!1),null==animate&&(animate=!0),self=this,time=0,delay&&(time=this.settings.delayAutoScroll),clearTimeout(this.timeoutScroll),control=this.$items.eq(index).data("control"),null!=control&&null!=control.connect&&null!=control.parent&&control.parent.connect===control&&(this.current<index?index++:index--),this.timeoutScroll=setTimeout(function(){return index===self.numQuestions?self.scrollToFooter():self.scrollToPos(self.positions[index].a,function(){return self.focus(index)},animate)},time)},Scroll.prototype.scrollToPrev=function(){return this.scrollTo(this.current-1)},Scroll.prototype.scrollToNext=function(delay){var self,time;return null==delay&&(delay=!1),self=this,time=0,delay&&(time=this.settings.delayAutoScroll),clearTimeout(this.timeoutScroll),this.timeoutScroll=setTimeout(function(){return self.current!==self.numQuestions-1?self.scrollTo(self.current+1):self.footer?self.scrollToFooter():void 0},time)},Scroll.prototype.scrollToFooter=function(delay){var time,_this=this;return null==delay&&(delay=!1),time=0,delay&&(time=this.settings.delayAutoScroll),clearTimeout(this.timeoutScroll),this.timeoutScroll=setTimeout(function(){return _this.scrollToPos(_this.positions[_this.numQuestions].item)},time)},Scroll.prototype.focus=function(index){return index!==this.current&&(this.current<this.numQuestions&&(this.$items.eq(this.current).removeClass("focus"),this.settings.onBlur(this.$items.eq(this.current))),this.current=index,this.settings.onFocus(this.$items.eq(this.current)),this.current<this.numQuestions?(this.$items.eq(this.current).addClass("focus"),this.footer&&this.footer.unbindEvents()):this.footer&&this.footer.bindEvents(),this.$items.eq(this.current-3).removeClass("visible"),this.$items.eq(this.current-2).addClass("visible"),this.$items.eq(this.current-1).addClass("visible"),this.$items.eq(this.current).addClass("visible"),this.$items.eq(this.current+1).addClass("visible"),this.$items.eq(this.current+2).addClass("visible"),this.$items.eq(this.current+3).removeClass("visible")),this},Scroll.prototype.bindEvents=function(){var self;return self=this,$(window).on("scroll.form",this,_scroll).on("scrollstart.form",this,function(e){return self=e.data,self.settings.onScrollStart()}).on("scrollstop.form",this,function(e){return self=e.data,self.settings.onScrollStop(self.$items.eq(self.current))}),$("body").on("click.form",".scroll-overlay",this,function(e){return self=e.data,self.scrollToPrev()}),this.$element.on("click.form","> li:not(.focus)",function(){var control;return control=$(this).data("control"),control.$elem.hasClass("focus")?void 0:self.scrollToPos(control.position.a)})},Scroll.prototype.unbindEvents=function(){return $(window).off(".form"),this.$element.off(".form")},getCurrent=function(positions,y,current){return positions[current].next<=y?current=getCurrent(positions,y,current+1):positions[current].prev>y&&current>0&&(current=getCurrent(positions,y,current-1)),current},_scroll=function(e){var self;return self=e.data,self.focus(getCurrent(self.positions,window.pageYOffset,self.current)),self.footer?self.footer.updatePosition(window.pageYOffset):void 0},Scroll}(),namespace("App",function(exports){return exports.Scroll=Scroll})}.call(this),function(){var Confirm,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Confirm=function(){function Confirm(scroll){this.scroll=scroll,this.check=__bind(this.check,this),this.$body=$("body"),this.$footerConfirm=$(".footer-confirm").find(".button"),$("#typeform").on("click",".footer-confirm .button,.focus .confirm .button.nav",function(){return form.next()})}return Confirm.prototype.scrollUpThreshold=160,Confirm.prototype.scrollUpOffset=70,Confirm.prototype.scroll=null,Confirm.prototype.check=function(isFilled,$confirm,$element,id){var currentControl,isAtLastField,_this=this;return null==id&&(id=null),null!=id&&(currentControl=this.scroll.getCurrentControl(),currentControl&&currentControl.id!==id)?!1:(isAtLastField=this.scroll.isAtLastField(),isFilled||isAtLastField?(this.setSkipState(!isFilled),this.scrollUp($element.offset().top,$(window).height(),window.pageYOffset,function(){return _this.show($confirm)})):this.hide($confirm))},Confirm.prototype.setSkipState=function(isSkipState){isSkipState?this.$body.addClass("confirm-skip"):this.$body.removeClass("confirm-skip")},Confirm.prototype.scrollUp=function(offsetTop,windowHeight,pageYOffset,callback){this.scrollUpThreshold>windowHeight+pageYOffset-offsetTop?(this.scroll.scrollToPos(offsetTop-windowHeight+this.scrollUpThreshold+this.scrollUpOffset),setTimeout(callback,this.scroll.getScrollSpeed())):callback()},Confirm.prototype.show=function($confirm){var self;return this.$confirm=$confirm,self=this,this.ready=!0,this.checkPosition(),this.$confirm.find(".button").hasClass("red")?this.$footerConfirm.addClass("red"):this.$footerConfirm.removeClass("red"),$(window).on("scroll.confirm",function(){return self.checkPosition()})},Confirm.prototype.hide=function(){return $("body").removeClass("confirm-nav"),$(window).off(".confirm"),this.ready=!1},Confirm.prototype.startLoading=function(){var opts,spinner;this.$spin=$("<div id='spin'></div>"),this.$buttonWrapper=this.$confirm.children(".button-wrapper"),this.$buttonWrapper.addClass("loading").append(this.$spin),opts={lines:12,length:2.3,width:2.5,radius:8,color:this.$buttonWrapper.css("color"),speed:2.1,trail:60,shadow:!1,hwaccel:!1},spinner=new Spinner(opts).spin(this.$spin[0])},Confirm.prototype.stopLoading=function(){this.$spin.remove(),this.$buttonWrapper.removeClass("loading")},Confirm.prototype.checkPosition=function(){return this.ready?this.$confirm.offset().top-window.pageYOffset-$(window).height()>-120?$("body").addClass("confirm-nav confirm-footer").removeClass("confirm-inline"):$("body").addClass("confirm-nav confirm-inline").removeClass("confirm-footer"):void 0},Confirm}(),namespace("App",function(exports){return exports.Confirm=Confirm})}.call(this),function(){var Error;Error=function(){function Error(Footer,settings){this.Footer=Footer,this.settings=$.extend({},defaults,settings),this.$footerMessage=$(".footer-message").find("span")}var defaults;return defaults={onFinish:function(){},speed:200},Error.prototype.check=function($elem){return $elem.hasClass("error")?(this.hasError=!0,this.show($elem,$elem.find(".message").children("span").html(),!1)):(this.hasError=!1,$(window).off(".error .confirm"),$("body").removeClass("footer-error confirm-nav confirm-footer"))},Error.prototype.show=function($elem,str,repeatEffect){var $message,self;return null==repeatEffect&&(repeatEffect=!0),this.hasError=!0,self=this,$message=$elem.find(".message"),$message.children("span").html(str),this.$footerMessage.html(str),$elem.hasClass("error")&&repeatEffect?($message.selectEffect(0),this.$footerMessage.selectEffect(0)):($elem.addClass("error"),$message.slideDown(self.settings.speed,function(){return self.settings.onFinish()}).css({display:"inline-block"}),this.checkPosition($message)),$(window).on("scroll.error",function(){return self.checkPosition($message)})},Error.prototype.hide=function($elem){var self;return this.hasError=!1,self=this,$("body").removeClass("footer-error"),$elem.hasClass("error")&&$elem.find(".message").stop(!0,!0).slideUp(self.settings.speed,function(){return $elem.removeClass("error"),self.settings.onFinish()}),$(window).off(".error")},Error.prototype.checkPosition=function($message){return this.hasError?$message.offset().top-window.pageYOffset-$(window).height()>-90?$("body").addClass("footer-error"):$("body").removeClass("footer-error"):void 0},Error}(),namespace("App",function(exports){return exports.Error=Error})}.call(this),function(){var Header,SubHeader,_ref,_ref1,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Header=function(_super){function Header(){return _ref=Header.__super__.constructor.apply(this,arguments)}return __extends(Header,_super),Header.prototype.setEvents=function(){var click_event,_this=this;Header.__super__.setEvents.call(this),click_event="touch"===Globals.browser?"touchend":"click",this.$el.on(click_event,function(){return _this.isOpenable()&&"full"!==_this.model.attributes.state?_this.model.set("state","full"):void 0}),$(document).on("keyup",function(e){var key;return"full"===_this.model.attributes.state&&(key=document.all?e.keyCode:e.which,App.Keyboard.isEsc(key))?_this.model.set("state","default"):void 0})},Header}(App.Header),SubHeader=function(_super){function SubHeader(){return _ref1=SubHeader.__super__.constructor.apply(this,arguments)}return __extends(SubHeader,_super),SubHeader}(App.SubHeader),namespace("App.default",function(exports){return exports.Header=Header,exports.SubHeader=SubHeader})}.call(this),function(){var Footer,START_SCROLLING_WITHIN,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};START_SCROLLING_WITHIN=80,Footer=function(_super){function Footer(){return this.review=__bind(this.review,this),this.submit=__bind(this.submit,this),_ref=Footer.__super__.constructor.apply(this,arguments)}return __extends(Footer,_super),Footer.prototype.initialize=function(){return this.$document=$(document),this.$footer=this.$elem,this.$reviewButton=this.$footer.find(".review .button"),this.$footer.css({height:this.settings.blurHeight}),this},Footer.prototype.resize=function(windowHeight){return this.windowHeight=windowHeight,this.settings.maxHeight=windowHeight/2,this},Footer.prototype.getScrollableLength=function(){return START_SCROLLING_WITHIN},Footer.prototype.get=function(property){return this.settings[property]},Footer.prototype.show=function(){return this.$footer.css({height:this.settings.maxHeight})},Footer.prototype.hide=function(){return this.$footer.css({height:this.settings.blurHeight}),this.$footer.removeClass("review")},Footer.prototype.open=function(){return this.show(),this.bindEvents()},Footer.prototype.close=function(){return this.hide(),this.unbindEvents()},Footer.prototype.updatePosition=function(windowPageYOffset){var distanceFromBottom,fixedFooterHeight;return distanceFromBottom=this.$document.height()-(windowPageYOffset+this.windowHeight),fixedFooterHeight=$("#fixed-footer").height(),this.$footer.css({height:(1-distanceFromBottom/fixedFooterHeight)*this.settings.maxHeight})},Footer.prototype.submit=function(){return Footer.__super__.submit.apply(this,arguments)},Footer.prototype.review=function(){return Footer.__super__.review.apply(this,arguments)},Footer.prototype.getNext=function(){return Footer.__super__.getNext.apply(this,arguments)},Footer.prototype.showMessage=function(str){return $("body").addClass("footer-error footer-submit"),this.$footerMessage.find("span").html(str)},Footer}(App.Submit),namespace("App",function(exports){return exports.Footer=Footer})}.call(this),hasUpdate=!1,asterisk="<span class='asterisk'>*</span>";var trimeoutAttachment,_updateControl=function(evt,obj){$window=$(window);var variable_map=window.top.form_variables;if("intro"==obj.type)obj.values.text&&(obj.values.text=App.TagEncoder.encode(obj.values.text,variable_map)),obj.values.description&&(obj.values.description=App.TagEncoder.encode(obj.values.description,variable_map)),evt.data.Intro.update(obj.values);else if("outro"==obj.type)obj.values.text&&(obj.values.text=App.TagEncoder.encode(obj.values.text,variable_map)),obj.values.button&&(obj.values.button=App.TagEncoder.encode(obj.values.button,variable_map)),evt.data.outrosCollection.get()[0].update(obj.values);else{$current=$("."+obj.type),control=$current.data("control"),obj.values.required&&(obj.values.question+=asterisk),obj.values.question&&(obj.values.question=App.TagEncoder.encode(obj.values.question,variable_map)),obj.values.description&&(obj.values.description=App.TagEncoder.encode(obj.values.description,variable_map)),obj.values.text&&(obj.values.text=App.TagEncoder.encode(obj.values.text,variable_map)),control.update(obj.values),$description=$current.find(".description");var descriptionEnabled=obj.values.descriptionEnabled;void 0!==descriptionEnabled&&null!==descriptionEnabled&&(descriptionEnabled===!0?($description.show(),$description.html(""===obj.values.description?'<span class="secondaryColor placeholder">'+App.Texts["placeholder-description"]+"</span>":obj.values.description)):$description.hide()),$attachmentWrapper=$current.find(".attachment-wrapper"),$attachment=$attachmentWrapper.children(".attachment"),$attachment.length||($attachment=$('<div class="attachment"></div>'),$attachmentWrapper.prepend($attachment)),attachmentObject=obj.values.attachment,"undefined"!=typeof attachmentObject&&("undefined"!=typeof attachmentObject.height?($current.addClass("attachment"),$attachment.data("attachment",attachmentObject),""!==attachmentObject.image&&$attachment.html('<img src="" width="0" height="0"/>'),attachment=new App.Attachment($attachment,{$question:control.$elem.find(".question"),$description:control.$elem.find(".description"),attachLimit:control.attachLimit["default"],questionType:control.type,useLazyLoad:!0,browser:"default",useFreezeFrame:!1}),attachment.precalculate(),attachment.resize($window.height(),control.$elem.find(".content").width()),attachment.load()):($current.removeClass("attachment"),$attachment.remove()),hasUpdate=!0,_.defer(function(){typeform.Form.scroll.refresh(!1),$window.scrollTop(typeform.Form.scroll.positions[0].a)})),$(".header > span").html(obj.values.question),hasUpdate||setTimeout(function(){form.center(Math.min($current.height()/2,$window.height()/2)),hasUpdate=!0},50)}};lessVars={};var _updateStyle=function(evt,obj){$typeform=$(this),obj["primary-color"]&&_.extend(lessVars,{"@primary-color":obj["primary-color"]}),obj["secondary-color"]&&_.extend(lessVars,{"@secondary-color":obj["secondary-color"]}),obj["background-color"]&&_.extend(lessVars,{"@background-color":obj["background-color"]}),backgroundImage=obj["background-image"]?"url("+obj["background-image"]+")":"",_.extend(lessVars,{"@background-image":backgroundImage}),(obj["background-brightness"]||0==obj["background-brightness"])&&_.extend(lessVars,{"@background-brightness":""+obj["background-brightness"]}),obj["button-color"]&&_.extend(lessVars,{"@button-color":obj["button-color"]}),obj["font-family"]&&_.extend(lessVars,{"@font-family":obj["font-family"]}),less.modifyVars(lessVars),obj["background-repeat"]&&$("body").removeClass("repeat fullscreen no-repeat").addClass(obj["background-repeat"]),obj["font-css"]?(fontName=obj["font-css"].match(/=+?(.*)[&;].?/)[1],typeform.updateFontClass(fontName),$typeform.trigger("loadingFont"),WebFont.load({google:{families:[fontName]},active:function(){$typeform.trigger("appliedFont")
},inactive:function(){$typeform.trigger("appliedFont")}})):obj["font-family"]&&(typeform.updateFontClass(obj["font-family"].split(",")[0]),$typeform.trigger("loadingFont"),$typeform.trigger("appliedFont")),App.Utils.setContainerColor(lessVars["@background-color"]+"",lessVars["@secondary-color"]+"")};(function(){var TagEncoder;TagEncoder=function(){function TagEncoder(){}return TagEncoder.encode=function(text,valueMap){var regex_pattern,tags;return regex_pattern=/\{\{(.+?)\}\}/g,tags=text.match(regex_pattern)||[],tags.forEach(function(tag){var id,node,regEx,replacement,tag_content;return id=tag.substring(2,tag.length-2),replacement=_.findWhere(valueMap,{val:id}),tag_content=replacement?replacement.name.replace(regex_pattern,"{{ ... }}"):"Unknown",node='<var class="tag">'+tag_content+"</var>",regEx=new RegExp("("+tag+")(?!([^<]+)?>)","g"),text=text.replace(regEx,node),text=text.replace(tag,tag_content)}),text},TagEncoder}(),namespace("App",function(exports){return exports.TagEncoder=TagEncoder})}).call(this),function(){var options={interval:75,distance:10,times:3},ShakeAnimation={shake:function($div,callback){var clearAnimationQueue=!0,jumpToAnimationEnd=!0;$div.stop(clearAnimationQueue,jumpToAnimationEnd);var i=0;for(i;i<options.times+1;i++){var isOdd=i%2===0;moveLeft($div,isOdd?options.distance:-1*options.distance)}moveLeft($div,0,callback)}},moveLeft=function($div,left,callback){$div.animate({left:left},{complete:callback,duration:options.interval})};namespace("App",function(exports){return exports.ShakeAnimation=ShakeAnimation})}(),function($){"use strict";function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)})}var TUBEPLAYER=".tubeplayer",TUBE_PLAYER_CLASS="jquery-youtube-tubeplayer",OPTS="opts"+TUBEPLAYER,TubePlayer={};TubePlayer.ytplayers={},TubePlayer.inits=[],TubePlayer.iframeScriptInited=!1,TubePlayer.inited=!1,$.tubeplayer={},$.tubeplayer.TubePlayer=TubePlayer,$.tubeplayer.events={},$.tubeplayer.defaults={afterReady:function(){},stateChange:function(player){var _ret=this.onPlayer;return function(state){switch("object"==typeof state&&(state=state.data),state){case-1:return _ret.unstarted[player]();case 0:return _ret.ended[player]();case 1:return _ret.playing[player]();case 2:return _ret.paused[player]();case 3:return _ret.buffering[player]();case 5:return _ret.cued[player]();default:return null}}},onError:function(player){var _ret=this.onErr;return function(errorCode){switch("object"==typeof errorCode&&(errorCode=errorCode.data),errorCode){case 2:return _ret.invalidParameter[player]();case 100:return _ret.notFound[player]();case 101:case 150:return _ret.notEmbeddable[player]();default:return null}}},qualityChange:function(player){var _this=this;return function(suggested){return"object"==typeof suggested&&(suggested=suggested.data),_this.onQualityChange[player](suggested)}},onQualityChange:{},onPlayer:{unstarted:{},ended:{},playing:{},paused:{},buffering:{},cued:{}},onErr:{notFound:{},notEmbeddable:{},invalidParameter:{}}};var defaults={width:425,height:355,allowFullScreen:"true",initialVideo:"DkoeNLuMbcI",start:0,preferredQuality:"default",showControls:!0,showRelated:!1,annotations:!0,autoPlay:!1,autoHide:!0,loop:0,theme:"dark",color:"red",showinfo:!1,modestbranding:!0,protocol:"http",wmode:"transparent",swfobjectURL:"ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",loadSWFObject:!0,allowScriptAccess:"always",playerID:"tubeplayer-player-container",iframed:!0,onPlay:function(){},onPause:function(){},onStop:function(){},onSeek:function(){},onMute:function(){},onUnMute:function(){},onPlayerUnstarted:function(){},onPlayerEnded:function(){},onPlayerPlaying:function(){},onPlayerPaused:function(){},onPlayerBuffering:function(){},onPlayerCued:function(){},onQualityChange:function(){},onErrorNotFound:function(){},onErrorNotEmbeddable:function(){},onErrorInvalidParameter:function(){}};$.fn.tubeplayer=function(input,xtra){var $this=$(this),type=typeof input;return 0===arguments.length||"object"===type?$this.each(function(){TubePlayer.init($(this),input)}):"string"===type?$this.triggerHandler(input+TUBEPLAYER,xtra||null):void 0};var buildFN=function(fn){return function(evt,param){var p=TubePlayer.getPkg(evt);if(p.ytplayer){var ret=fn(evt,param,p);return"undefined"==typeof ret&&(ret=p.$player),ret}return p.$player}};$.tubeplayer.getPlayers=function(){return TubePlayer.ytplayers},TubePlayer.init=function($player,opts){if($player.hasClass(TUBE_PLAYER_CLASS))return $player;var o=$.extend({},defaults,opts);o.playerID+="-"+guid(),$player.addClass(TUBE_PLAYER_CLASS).data(OPTS,o);for(var event in PLAYER)$player.bind(event+TUBEPLAYER,$player,PLAYER[event]);return TubePlayer.initDefaults($.tubeplayer.defaults,o),$("<div></div>").attr("id",o.playerID).appendTo($player),TubePlayer.initPlayer($player,o),$player},TubePlayer.getPkg=function(evt){var $player=evt.data,opts=$player.data(OPTS),ytplayer=TubePlayer.ytplayers[opts.playerID];return{$player:$player,opts:opts,ytplayer:ytplayer}},TubePlayer.iframeReady=function(o){return TubePlayer.inits.push(function(){new YT.Player(o.playerID,{videoId:o.initialVideo,width:o.width,height:o.height,playerVars:{autoplay:o.autoPlay?1:0,autohide:o.autoHide?1:0,controls:o.showControls?1:0,loop:o.loop?1:0,playlist:o.loop?o.initialVideo:"",rel:o.showRelated?1:0,fs:o.allowFullScreen?1:0,wmode:o.wmode,showinfo:o.showinfo?1:0,modestbranding:o.modestbranding?1:0,iv_load_policy:o.annotations?1:3,start:o.start,theme:o.theme,color:o.color,html5:1,vq:o.preferredQuality},events:{onReady:function(evt){TubePlayer.ytplayers[o.playerID]=evt.target;var $player=$(evt.target).parents("."+TUBE_PLAYER_CLASS);$.tubeplayer.defaults.afterReady($player)},onPlaybackQualityChange:$.tubeplayer.defaults.qualityChange(o.playerID),onStateChange:$.tubeplayer.defaults.stateChange(o.playerID),onError:$.tubeplayer.defaults.onError(o.playerID)}})}),TubePlayer.inits.length>=1&&!TubePlayer.inited?function(){for(var i=0;i<TubePlayer.inits.length;i++)TubePlayer.inits[i]();TubePlayer.inited=!0}:(TubePlayer.inited&&TubePlayer.inits.pop()(),window.onYouTubePlayerAPIReady)},TubePlayer.supportsHTML5=function(){return!!document.createElement("video").canPlayType},TubePlayer.initDefaults=function(d,o){var ID=o.playerID,dp=d.onPlayer;dp.unstarted[ID]=o.onPlayerUnstarted,dp.ended[ID]=o.onPlayerEnded,dp.playing[ID]=o.onPlayerPlaying,dp.paused[ID]=o.onPlayerPaused,dp.buffering[ID]=o.onPlayerBuffering,dp.cued[ID]=o.onPlayerCued,d.onQualityChange[ID]=o.onQualityChange;var de=d.onErr;de.notFound[ID]=o.onErrorNotFound,de.notEmbeddable[ID]=o.onErrorNotEmbeddable,de.invalidParameter[ID]=o.onErrorInvalidParameter},TubePlayer.initPlayer=function($player,o){o.iframed&&TubePlayer.supportsHTML5()?TubePlayer.initIframePlayer($player,o):TubePlayer.initFlashPlayer($player,o)},TubePlayer.initIframePlayer=function($player,o){if(!TubePlayer.iframeScriptInited){var tag=document.createElement("script");tag.src=o.protocol+"://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),TubePlayer.iframeScriptInited=!0}window.onYouTubePlayerAPIReady=TubePlayer.iframeReady(o)},TubePlayer.initFlashPlayer=function($player,o){o.loadSWFObject?(o.swfobjectURL=o.swfobjectURL.replace("http://",""),o.swfobjectURL=o.swfobjectURL.replace("https://",""),o.swfobjectURL=o.protocol+"://"+o.swfobjectURL,$.getScript(o.swfobjectURL,TubePlayer.initFlashPlayerFN(o))):TubePlayer.initFlashPlayerFN(o)()},TubePlayer.initFlashPlayerFN=function(o){return function(){var url=["//www.youtube.com/v/"];url.push(o.initialVideo),url.push("?&enablejsapi=1&version=3"),url.push("&playerapiid="+o.playerID),url.push("&rel= "+(o.showRelated?1:0)),url.push("&autoplay="+(o.autoPlay?1:0)),url.push("&autohide="+(o.autoHide?1:0)),url.push("&loop="+(o.loop?1:0)),url.push("&playlist="+(o.loop?o.initialVideo:"")),url.push("&controls="+(o.showControls?1:0)),url.push("&showinfo="+(o.showinfo?1:0)),url.push("&modestbranding="+(o.modestbranding?1:0)),url.push("&iv_load_policy="+(o.annotations?1:3)),url.push("&start="+o.start),url.push("&theme="+o.theme),url.push("&color="+o.color),url.push("&fs="+(o.allowFullScreen?1:0)),swfobject.embedSWF(url.join(""),o.playerID,o.width,o.height,"8",null,null,{allowScriptAccess:o.allowScriptAccess,wmode:o.wmode,allowFullScreen:o.allowFullScreen},{id:o.playerID}),window.onYouTubePlayerReady=function(playerId){var player=document.getElementById(playerId),pid=playerId.replace(/-/g,""),d=$.tubeplayer.defaults;$.tubeplayer.events[pid]={stateChange:d.stateChange(playerId),error:d.onError(playerId),qualityChange:d.qualityChange(playerId)},player.addEventListener("onStateChange","$.tubeplayer.events."+pid+".stateChange"),player.addEventListener("onError","$.tubeplayer.events."+pid+".error"),player.addEventListener("onPlaybackQualityChange","$.tubeplayer.events."+pid+".qualityChange"),TubePlayer.ytplayers[playerId]=player;var $player=$(player).parents("."+TUBE_PLAYER_CLASS);$.tubeplayer.defaults.afterReady($player)}}},TubePlayer.getVideoIDFromURL=function(sURL){sURL=sURL||"";var qryParamsStart=sURL.indexOf("?"),qryParams=sURL.substring(qryParamsStart,sURL.length),videoStart=qryParams.indexOf("v=");if(videoStart>-1){var videoEnd=qryParams.indexOf("&",videoStart);return-1===videoEnd&&(videoEnd=qryParams.length),qryParams.substring(videoStart+"v=".length,videoEnd)}return""};var PLAYER={cue:buildFN(function(evt,param,p){p.ytplayer.cueVideoById(param,p.opts.preferredQuality)}),play:buildFN(function(evt,param,p){"object"==typeof param?p.ytplayer.loadVideoById(param.id,param.time,p.opts.preferredQuality):param?p.ytplayer.loadVideoById(param,0,p.opts.preferredQuality):p.ytplayer.playVideo(),p.opts.onPlay(param)}),pause:buildFN(function(evt,param,p){p.ytplayer.pauseVideo(),p.opts.onPause(p)}),stop:buildFN(function(evt,param,p){p.ytplayer.stopVideo(),p.opts.onStop(p)}),seek:buildFN(function(evt,param,p){p.ytplayer.seekTo(param,!0),p.opts.onSeek(param)}),mute:buildFN(function(evt,param,p){p.$player.attr("data-prev-mute-volume",p.ytplayer.getVolume()),p.ytplayer.mute(),p.opts.onMute(p)}),unmute:buildFN(function(evt,param,p){p.ytplayer.unMute(),p.ytplayer.setVolume(p.$player.attr("data-prev-mute-volume")||50),p.opts.onUnMute()}),isMuted:buildFN(function(evt,param,p){return p.ytplayer.isMuted()}),volume:buildFN(function(evt,param,p){return param?(p.ytplayer.setVolume(param),void p.$player.attr("data-prev-mute-volume",p.ytplayer.getVolume())):p.ytplayer.getVolume()||0}),quality:buildFN(function(evt,param,p){return param?void p.ytplayer.setPlaybackQuality(param):p.ytplayer.getPlaybackQuality()}),data:buildFN(function(evt,param,p){var ret={},P=p.ytplayer;return ret.bytesLoaded=P.getVideoBytesLoaded(),ret.bytesTotal=P.getVideoBytesTotal(),ret.startBytes=P.getVideoStartBytes(),ret.state=P.getPlayerState(),ret.currentTime=P.getCurrentTime(),ret.duration=P.getDuration(),ret.videoURL=P.getVideoUrl(),ret.getVideoEmbedCode=P.getVideoEmbedCode(),ret.videoID=TubePlayer.getVideoIDFromURL(ret.videoURL),ret.availableQualityLevels=P.getAvailableQualityLevels(),ret}),videoId:buildFN(function(evt,param,p){return TubePlayer.getVideoIDFromURL(p.ytplayer.getVideoUrl())}),size:buildFN(function(evt,param,p){param.width&&param.height&&(p.ytplayer.setSize(param.width,param.height),$(p.ytplayer).css(param))}),destroy:buildFN(function(evt,param,p){p.$player.removeClass(TUBE_PLAYER_CLASS).data(OPTS,null).unbind(TUBEPLAYER).html(""),delete TubePlayer.ytplayers[p.opts.playerID];var d=$.tubeplayer.defaults,events=["unstarted","ended","playing","paused","buffering","cued"];for(var _event in events)delete d.onPlayer[events[_event]][p.opts.playerID];events=["notFound","notEmbeddable","invalidParameter"];for(var _event in events)delete d.onErr[events[_event]][p.opts.playerID];return delete d.onQualityChange[p.opts.playerID],delete $.tubeplayer.events[p.opts.playerID],$(p.ytplayer).remove(),null}),player:buildFN(function(evt,param,p){return p.ytplayer})}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})});var KeyboardTooltips;KeyboardTooltips=function(){var numClicks=0,numClicksNav=0;$tooltip=$("<div class='tooltip-key backgroundColor'><span class='t'>"+App.Texts.key+"</span> <span class='k'>A</span></span></div>"),$(".letter").closest("li").on("mouseenter.tooltip mouseleave.tooltip",function(e){"mouseenter"==e.type?($letter=$(this).find(".letter"),$tooltip.find(".k").html($letter.children("span").html()),$letter.append($tooltip)):$tooltip.detach()}),$(document).on("mouseenter.tooltipNav mouseleave.tooltipNav",".button.general,.button.confirm",function(e){$buttonToolTip=$(this).siblings(".tooltip"),"mouseenter"==e.type?$buttonToolTip.addClass("show"):$buttonToolTip.removeClass("show")});var disableTooltips=function(){$(".letter").closest("li").off(".tooltip"),$tooltip.remove()},disableNavTooltips=function(){$(document).off(".tooltipNav"),$(".button.nav").siblings(".tooltip").remove()};$(document).on("mousedown",function(e){$(e.target).hasClass("button")?numClicksNav++:numClicks++,numClicks>1&&disableTooltips(),numClicksNav>1&&disableNavTooltips()}),$(document).on("keyup",function(evt){key=document.all?evt.keyCode:evt.which,App.Keyboard.isEnter(key)?disableNavTooltips():"TEXTAREA"!=evt.target.nodeName&&"INPUT"!=evt.target.nodeName&&disableTooltips()})},namespace("App",function(exports){return exports.KeyboardTooltips=KeyboardTooltips}),function(){var special=jQuery.event.special,uid1="D"+ +new Date,uid2="D"+(+new Date+1);special.scrollstart={setup:function(){var timer,handler=function(evt){var _self=this,_args=arguments;timer?clearTimeout(timer):(evt.type="scrollstart",jQuery.event.dispatch.apply(_self,_args)),timer=setTimeout(function(){timer=null},special.scrollstop.latency)};jQuery(this).bind("scroll",handler).data(uid1,handler)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(uid1))}},special.scrollstop={latency:300,setup:function(){var timer,handler=function(evt){var _self=this,_args=arguments;timer&&clearTimeout(timer),timer=setTimeout(function(){timer=null,evt.type="scrollstop",jQuery.event.dispatch.apply(_self,_args)},special.scrollstop.latency)};jQuery(this).bind("scroll",handler).data(uid2,handler)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(uid2))}}}(),!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.onProcess=this.options.onProcess||this.onProcess,this.onDropdownShow=this.options.onDropdownShow||this.onDropdownShow,this.onDropdownHide=this.options.onDropdownHide||this.onDropdownHide,this.onActive=this.options.onActive||this.onActive,this.source=this.options.source,this.$menu=$(this.options.menu),this.$menu.insertAfter(this.$element),this.mouseX=0,this.mouseY=0,this.isIe=/(msie|trident)/i.test(navigator.userAgent.toLowerCase()),this.options.wrapper&&this.$menu.wrap(this.options.wrapper),this.shown=!1,this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(val)).change(),this},updater:function(item){return item},onProcess:function(){},onDropdownShow:function(){},onDropdownHide:function(){},show:function(){$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.show(),this.shown=!0,this.options.onDropdownShow(),this},hide:function(){return this.$menu.hide(),this.shown=!1,this.options.onDropdownHide(),this},lookup:function(){var items;return this.query=this.$element.val(),this.query.length<this.options.minLength?this.shown?this.hide():this:(items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,items?this.process(items):this)},process:function(items){var that=this;return items=$.grep(items,function(item){return that.matcher(item)}),items=this.sorter(items),this.onProcess(items.length),items.length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){for(var item,beginswith=[],caseSensitive=[],caseInsensitive=[];item=items.shift();)item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;return items=$(items).map(function(i,item){return i=$(that.options.item).attr("data-value",item),i.find("a").html(that.highlighter(item)),i[0]}),items.first().addClass("active"),this.$menu.html(items),this},onActive:function(elem){elem.addClass("active")},next:function(){var active=this.$menu.find(".active").removeClass("active"),next=active.next();next.length||(next=$(this.$menu.find("li")[0])),this.onActive(next)},prev:function(){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();prev.length||(prev=this.$menu.find("li:last-child")),this.onActive(prev)},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this)).on("mousemove","li",$.proxy(this.mousemove,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;return isSupported||(this.$element.setAttribute(eventName,"return;"),isSupported="function"==typeof this.$element[eventName]),isSupported},move:function(e){if(this.shown)switch(e.keyCode){case 9:break;case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 38:case 16:case 17:case 18:break;case 40:if(this.shown)break;return this.lookup();case 9:this.hide();break;case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){(this.mouseX!=e.pageX||this.mouseY!=e.pageY||this.isIe)&&(this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active"))},mousemove:function(e){this.mouseX=e.pageX,this.mouseY=e.pageY},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options="object"==typeof option&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),"string"==typeof option&&data[option]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},$.fn.typeahead.Constructor=Typeahead,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var $this=$(this);$this.data("typeahead")||$this.typeahead($this.data())})}(window.jQuery),function($,window,document){"use strict";var BROWSER_IS_IE7,BROWSER_SCROLLBAR_WIDTH,DOMSCROLL,DOWN,DRAG,KEYDOWN,KEYUP,MOUSEDOWN,MOUSEMOVE,MOUSEUP,MOUSEWHEEL,NanoScroll,PANEDOWN,RESIZE,SCROLL,SCROLLBAR,TOUCHMOVE,UP,WHEEL,defaults,getBrowserScrollbarWidth;defaults={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null},SCROLLBAR="scrollbar",SCROLL="scroll",MOUSEDOWN="mousedown",MOUSEMOVE="mousemove",MOUSEWHEEL="mousewheel",MOUSEUP="mouseup",RESIZE="resize",DRAG="drag",UP="up",PANEDOWN="panedown",DOMSCROLL="DOMMouseScroll",DOWN="down",WHEEL="wheel",KEYDOWN="keydown",KEYUP="keyup",TOUCHMOVE="touchmove",BROWSER_IS_IE7="Microsoft Internet Explorer"===window.navigator.appName&&/msie 7./i.test(window.navigator.appVersion)&&window.ActiveXObject,BROWSER_SCROLLBAR_WIDTH=null,getBrowserScrollbarWidth=function(){var outer,outerStyle,scrollbarWidth;return outer=document.createElement("div"),outerStyle=outer.style,outerStyle.position="absolute",outerStyle.width="100px",outerStyle.height="100px",outerStyle.overflow=SCROLL,outerStyle.top="-9999px",document.body.appendChild(outer),scrollbarWidth=outer.offsetWidth-outer.clientWidth,document.body.removeChild(outer),scrollbarWidth},NanoScroll=function(){function NanoScroll(el,options){this.el=el,this.options=options,BROWSER_SCROLLBAR_WIDTH||(BROWSER_SCROLLBAR_WIDTH=getBrowserScrollbarWidth()),this.$el=$(this.el),this.doc=$(document),this.win=$(window),this.$content=this.$el.children("."+options.contentClass),this.$content.attr("tabindex",0),this.content=this.$content[0],this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return NanoScroll.prototype.preventScrolling=function(e,direction){if(this.isActive)if(e.type===DOMSCROLL)(direction===DOWN&&e.originalEvent.detail>0||direction===UP&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===MOUSEWHEEL){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(direction===DOWN&&e.originalEvent.wheelDelta<0||direction===UP&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},NanoScroll.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},NanoScroll.prototype.updateScrollValues=function(){var content;content=this.content,this.maxScrollTop=content.scrollHeight-content.clientHeight,this.contentScrollTop=content.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},NanoScroll.prototype.createEvents=function(){var _this=this;this.events={down:function(e){return _this.isBeingDragged=!0,_this.offsetY=e.pageY-_this.slider.offset().top,_this.pane.addClass("active"),_this.doc.bind(MOUSEMOVE,_this.events[DRAG]).bind(MOUSEUP,_this.events[UP]),!1},drag:function(e){return _this.sliderY=e.pageY-_this.$el.offset().top-_this.offsetY,_this.scroll(),_this.updateScrollValues(),_this.contentScrollTop>=_this.maxScrollTop?_this.$el.trigger("scrollend"):0===_this.contentScrollTop&&_this.$el.trigger("scrolltop"),!1},up:function(){return _this.isBeingDragged=!1,_this.pane.removeClass("active"),_this.doc.unbind(MOUSEMOVE,_this.events[DRAG]).unbind(MOUSEUP,_this.events[UP]),!1},resize:function(){_this.reset()},panedown:function(e){return _this.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*_this.sliderHeight,_this.scroll(),_this.events.down(e),!1},scroll:function(e){_this.isBeingDragged||(_this.updateScrollValues(),_this.iOSNativeScrolling||(_this.sliderY=_this.sliderTop,_this.slider.css({top:_this.sliderTop})),null!=e&&(_this.contentScrollTop>=_this.maxScrollTop?(_this.options.preventPageScrolling&&_this.preventScrolling(e,DOWN),_this.$el.trigger("scrollend")):0===_this.contentScrollTop&&(_this.options.preventPageScrolling&&_this.preventScrolling(e,UP),_this.$el.trigger("scrolltop"))))},wheel:function(e){return null!=e?(_this.sliderY+=-e.wheelDeltaY||-e.delta,_this.scroll(),!1):void 0}}},NanoScroll.prototype.addEvents=function(){var events;this.removeEvents(),events=this.events,this.options.disableResize||this.win.bind(RESIZE,events[RESIZE]),this.iOSNativeScrolling||(this.slider.bind(MOUSEDOWN,events[DOWN]),this.pane.bind(MOUSEDOWN,events[PANEDOWN]).bind(""+MOUSEWHEEL+" "+DOMSCROLL,events[WHEEL])),this.$content.bind(""+SCROLL+" "+MOUSEWHEEL+" "+DOMSCROLL+" "+TOUCHMOVE,events[SCROLL])},NanoScroll.prototype.removeEvents=function(){var events;events=this.events,this.win.unbind(RESIZE,events[RESIZE]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+SCROLL+" "+MOUSEWHEEL+" "+DOMSCROLL+" "+TOUCHMOVE,events[SCROLL])},NanoScroll.prototype.generate=function(){var contentClass,cssRule,options,paneClass,sliderClass;return options=this.options,paneClass=options.paneClass,sliderClass=options.sliderClass,contentClass=options.contentClass,this.$el.find(""+paneClass).length||this.$el.find(""+sliderClass).length||this.$el.append('<div class="'+paneClass+'"><div class="'+sliderClass+'" /></div>'),this.pane=this.$el.children("."+paneClass),this.slider=this.pane.find("."+sliderClass),BROWSER_SCROLLBAR_WIDTH&&(cssRule="rtl"===this.$el.css("direction")?{left:-BROWSER_SCROLLBAR_WIDTH}:{right:-BROWSER_SCROLLBAR_WIDTH},this.$el.addClass("has-scrollbar")),null!=cssRule&&this.$content.css(cssRule),this},NanoScroll.prototype.restore=function(){this.stopped=!1,this.pane.show(),this.addEvents()},NanoScroll.prototype.reset=function(){var content,contentHeight,contentStyle,contentStyleOverflowY,paneBottom,paneHeight,paneOuterHeight,paneTop,sliderHeight;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),content=this.content,contentStyle=content.style,contentStyleOverflowY=contentStyle.overflowY,BROWSER_IS_IE7&&this.$content.css({height:this.$content.height()}),contentHeight=content.scrollHeight+BROWSER_SCROLLBAR_WIDTH,paneHeight=this.pane.outerHeight(),paneTop=parseInt(this.pane.css("top"),10),paneBottom=parseInt(this.pane.css("bottom"),10),paneOuterHeight=paneHeight+paneTop+paneBottom,sliderHeight=Math.round(paneOuterHeight/contentHeight*paneOuterHeight),sliderHeight<this.options.sliderMinHeight?sliderHeight=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&sliderHeight>this.options.sliderMaxHeight&&(sliderHeight=this.options.sliderMaxHeight),contentStyleOverflowY===SCROLL&&contentStyle.overflowX!==SCROLL&&(sliderHeight+=BROWSER_SCROLLBAR_WIDTH),this.maxSliderTop=paneOuterHeight-sliderHeight,this.contentHeight=contentHeight,this.paneHeight=paneHeight,this.paneOuterHeight=paneOuterHeight,this.sliderHeight=sliderHeight,this.slider.height(sliderHeight),this.events.scroll(),this.pane.show(),this.isActive=!0,content.scrollHeight===content.clientHeight||this.pane.outerHeight(!0)>=content.scrollHeight&&contentStyleOverflowY!==SCROLL?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===content.scrollHeight&&contentStyleOverflowY===SCROLL?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this)},NanoScroll.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop((this.paneHeight-this.contentHeight+BROWSER_SCROLLBAR_WIDTH)*this.sliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||this.slider.css({top:this.sliderY}),this):void 0},NanoScroll.prototype.scrollBottom=function(offsetY){return this.isActive?(this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-offsetY).trigger(MOUSEWHEEL),this):void 0},NanoScroll.prototype.scrollTop=function(offsetY){return this.isActive?(this.reset(),this.$content.scrollTop(+offsetY).trigger(MOUSEWHEEL),this):void 0},NanoScroll.prototype.scrollTo=function(node){return this.isActive?(this.reset(),this.scrollTop($(node).get(0).offsetTop),this):void 0},NanoScroll.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.pane.hide(),this
},NanoScroll.prototype.flash=function(){var _this=this;if(this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(){_this.pane.removeClass("flashed")},this.options.flashDelay),this},NanoScroll}(),$.fn.nanoScroller=function(settings){return this.each(function(){var options,scrollbar;if((scrollbar=this.nanoscroller)||(options=$.extend({},defaults,settings),this.nanoscroller=scrollbar=new NanoScroll(this,options)),settings&&"object"==typeof settings){if($.extend(scrollbar.options,settings),settings.scrollBottom)return scrollbar.scrollBottom(settings.scrollBottom);if(settings.scrollTop)return scrollbar.scrollTop(settings.scrollTop);if(settings.scrollTo)return scrollbar.scrollTo(settings.scrollTo);if("bottom"===settings.scroll)return scrollbar.scrollBottom(0);if("top"===settings.scroll)return scrollbar.scrollTop(0);if(settings.scroll&&settings.scroll instanceof $)return scrollbar.scrollTo(settings.scroll);if(settings.stop)return scrollbar.stop();if(settings.flash)return scrollbar.flash()}return scrollbar.reset()})}}(jQuery,window,document),function($){var supportsScrollHeight,mirrored,defaults={className:"autosizejs",append:"",callback:!1},hidden="hidden",borderBox="border-box",lineHeight="lineHeight",copy='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',copyStyle=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],oninput="oninput",onpropertychange="onpropertychange",mirror=$(copy).data("autosize",!0)[0];mirror.style.lineHeight="99px","99px"===$(mirror).css(lineHeight)&&copyStyle.push(lineHeight),mirror.style.lineHeight="",$.fn.autosize=function(options){return options=$.extend({},defaults,options||{}),mirror.parentNode!==document.body&&($(document.body).append(mirror),mirror.value="\n\n\n",mirror.scrollTop=9e4,supportsScrollHeight=mirror.scrollHeight===mirror.scrollTop+mirror.clientHeight),this.each(function(){function initMirror(){mirrored=ta,mirror.className=options.className,$.each(copyStyle,function(i,val){mirror.style[val]=$ta.css(val)})}function adjust(){var height,overflow,original;if(mirrored!==ta&&initMirror(),!active){active=!0,mirror.value=ta.value+options.append,mirror.style.overflowY=ta.style.overflowY,original=parseInt(ta.style.height,10),mirror.style.width=Math.max($ta.width(),0)+"px",supportsScrollHeight?height=mirror.scrollHeight:(mirror.scrollTop=0,mirror.scrollTop=9e4,height=mirror.scrollTop);var maxHeight=parseInt($ta.css("maxHeight"),10);maxHeight=maxHeight&&maxHeight>0?maxHeight:9e4,height>maxHeight?(height=maxHeight,overflow="scroll"):minHeight>height&&(height=minHeight),height+=boxOffset,ta.style.overflowY=overflow||hidden,original!==height&&(ta.style.height=height+"px",callback&&options.callback.call(ta)),setTimeout(function(){active=!1},1)}}var minHeight,active,resize,ta=this,$ta=$(ta),boxOffset=0,callback=$.isFunction(options.callback);$ta.data("autosize")||(($ta.css("box-sizing")===borderBox||$ta.css("-moz-box-sizing")===borderBox||$ta.css("-webkit-box-sizing")===borderBox)&&(boxOffset=$ta.outerHeight()-$ta.height()),minHeight=Math.max(parseInt($ta.css("minHeight"),10)-boxOffset,$ta.height()),resize="none"===$ta.css("resize")||"vertical"===$ta.css("resize")?"none":"horizontal",$ta.css({overflow:hidden,overflowY:hidden,wordWrap:"break-word",resize:resize}).data("autosize",!0),onpropertychange in ta?oninput in ta?ta[oninput]=ta.onkeyup=adjust:ta[onpropertychange]=adjust:ta[oninput]=adjust,$(window).on("resize",function(){active=!1,adjust()}),$ta.on("autosize",function(){active=!1,adjust()}),adjust())})}}(window.jQuery||window.Zepto),function(){var ScrollPoints,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};ScrollPoints=function(){function ScrollPoints(){this.scroll=__bind(this.scroll,this),$(window).on("scroll",_.throttle(this.scroll,this.throttleWait))}return ScrollPoints.prototype.points=[],ScrollPoints.prototype.lastScrollY=-1,ScrollPoints.prototype.throttleWait=50,ScrollPoints.prototype.add=function(point){return this.points.push(point),this},ScrollPoints.prototype.reset=function(){return this.points=[],this},ScrollPoints.prototype.scroll=function(){this.checkPoints(window.pageYOffset)},ScrollPoints.prototype.checkPoints=function(scrollY){var direction,from,i,numPoints,point,reachDownPoint,reachUpPoint,to,_i;if(numPoints=this.points.length,numPoints>0){for(direction=scrollY>this.lastScrollY?"down":"up","up"===direction?(from=numPoints-1,to=0):(from=0,to=numPoints-1),i=_i=from;to>=from?to>=_i:_i>=to;i=to>=from?++_i:--_i)point=this.points[i],reachDownPoint="down"===direction&&point.y<=scrollY&&point.y>this.lastScrollY,reachUpPoint="up"===direction&&point.y>=scrollY&&point.y<this.lastScrollY,(reachDownPoint||reachUpPoint)&&point.callback(direction);this.lastScrollY=scrollY}},ScrollPoints}(),namespace("App.Service",function(exports){return exports.ScrollPoints=ScrollPoints})}.call(this);